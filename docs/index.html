<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TapKraken | RGB Edition</title>
  <!-- Футуристичный шрифт для усиления эффекта -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <!-- Font Awesome для иконок -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="city.css">
  <!-- SEO метатеги -->
  <meta name="description" content="TapKraken - захватывающая кликер-игра с Кракеном в сине-красно-белой гамме. Собирай монеты, улучшай своего Кракена и соревнуйся с друзьями!">
  <!-- Open Graph tags -->
  <meta property="og:title" content="TapKraken" />
  <meta property="og:description" content="Кликай на Кракена, собирай монеты и стань лучшим в мире TapKraken!" />
  <meta property="og:type" content="website" />
</head>
<body>
  <!-- Проверка устройства -->
  <div id="device-check">
    <div class="device-check-content">
      <h2>TapKraken Mobile</h2>
      <p>Игра TapKraken доступна только на мобильных устройствах</p>
      <div class="qr-container">
        <img src="TAPKRAKEN.png" alt="QR Code" class="qr-code">
      </div>
      <div class="device-info">
        <div class="device-icon desktop">
          <i class="fas fa-desktop"></i>
          <span>Компьютер</span>
        </div>
        <div class="device-icon mobile">
          <i class="fas fa-mobile-alt"></i>
          <span>Телефон</span>
        </div>
      </div>
      <p class="small-text">Сканируйте QR-код для игры на смартфоне</p>
    </div>
  </div>

  <!-- Загрузочный экран с анимацией -->
  <div id="loading-screen">
    <img src="loading-screen.webp" alt="Загрузка..." id="loading-image">
    <div class="loading-progress-container">
      <div id="loading-progress-bar"></div>
    </div>
    <h1 class="loading-title">TAPKRAKEN</h1>
  </div>
  
  <!-- Дополнительный контейнер для фоновых частиц -->
  <div id="particle-container"></div>

  <!-- Основной контент -->
  <div id="main-content" style="display: none;">
    <!-- Верхняя панель с показателями игрока -->
    <div class="top-bar">
      <div class="currency-display">
        <div class="coin-icon">
          <i class="fas fa-bolt"></i>
        </div>
        <span id="score">0</span>
      </div>
      <div class="stats-container">
        <div class="stat-item">
          <i class="fas fa-coins"></i>
          <span id="income-per-hour">0</span> Доход/час
        </div>
        <div class="stat-item">
          <i class="fas fa-hand-pointer"></i>
          <span id="income-per-tap">1</span> Доход/тап
          <div class="multiplier">
            <i class="fas fa-times"></i>
            <span id="tap-multiplier">1</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Панель энергии -->
    <div class="energy-container">
      <i class="fas fa-bolt energy-icon"></i>
      <div class="energy-bar-container">
        <div id="energy-bar" class="energy-bar"></div>
      </div>
      <span id="energy-text"><span id="energy">500</span>/<span id="max-energy">500</span></span>
    </div>

    <!-- Основная игровая зона -->
    <div class="game-area">
      <!-- Левое меню -->
      <div class="side-menu left-menu">
        <div class="menu-button friends-button" onclick="openFriends()">
          <div class="indicator">5</div>
          <i class="fas fa-users"></i>
          <span>Друзья</span>
        </div>
        <div class="menu-button tasks-button" onclick="openTasks()">
          <div class="indicator">3</div>
          <i class="fas fa-gift"></i>
          <span>Задания</span>
        </div>
        <div class="menu-button leaderboard-button" onclick="openLeaderboard()">
          <i class="fas fa-trophy"></i>
          <span>Рейтинг</span>
        </div>
        <div class="menu-button lucky-drive" onclick="openLuckyDrive()">
          <div class="new-badge">NEW</div>
          <i class="fas fa-car"></i>
          <span>Lucky Drive</span>
        </div>
      </div>

      <!-- Центральная зона с Кракеном -->
      <div id="kraken-container">
        <!-- При клике вызывается tap(event) -->
        <img id="kraken" src="kraken_1.png" alt="Kraken" draggable="false" onclick="tap(event)">
        <!-- Контейнер для визуальных эффектов -->
        <div id="tap-effects"></div>
      </div>

      <!-- Правое меню -->
      <div class="side-menu right-menu">
        <div class="menu-button shop-button" onclick="openShop()">
          <i class="fas fa-store"></i>
          <span>Магазин</span>
        </div>
        <div class="menu-button puzzle-button" onclick="openPuzzle()">
          <i class="fas fa-puzzle-piece"></i>
          <span>Головоломка</span>
        </div>
        <div class="menu-button telegram-button" onclick="openTelegramCommands()">
          <i class="fab fa-telegram"></i>
          <span>Команды</span>
        </div>
      </div>
    </div>

    <!-- Нижняя навигация -->
    <div class="bottom-nav">
      <div class="nav-button" data-tab="city">
        <div class="nav-icon">
          <i class="fas fa-city"></i>
          <div class="new-badge-small">RGB</div>
        </div>
        <span>Город</span>
      </div>
      <div class="nav-button active" data-tab="home">
        <div class="nav-icon">
          <i class="fas fa-home"></i>
        </div>
        <span>Главная</span>
      </div>
    </div>

    <!-- Вкладки контента -->
    <div id="home-tab" class="content-tab" style="display: block;">
      <!-- Основной контент главной вкладки находится в game-area выше -->
    </div>

    <div id="city-tab" class="content-tab" style="display: none;">
      <div class="city-header">
        <h2>Город Кракена</h2>
        <p>Стройте и улучшайте здания для получения пассивного дохода</p>
      </div>
      <div id="city-content" class="city-content">
        <!-- Содержимое будет заполнено динамически -->
      </div>
    </div>

    <div id="minigames-tab" class="content-tab" style="display: none;">
      <div class="minigames-header">
        <h2>Мини-игры</h2>
        <p>Играй и получай дополнительные награды!</p>
      </div>
      <div id="minigames-container" class="minigames-container">
        <!-- Содержимое будет заполнено динамически -->
      </div>
    </div>

    <!-- Модальные окна -->
    <!-- Магазин -->
    <div id="shop-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Магазин</h2>
          <button class="close-button" onclick="closeShop()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-tabs">
          <div class="tab active" data-tab="upgrades">Улучшения</div>
          <div class="tab" data-tab="boosters">Бустеры</div>
          <div class="tab" data-tab="special">Особые</div>
        </div>
        
        <div class="modal-body">
          <div class="tab-content active" id="upgrades-tab">
            <div class="shop-item" onclick="buyUpgrade(1, 150, 50)">
              <div class="shop-item-icon"><i class="fas fa-hand-pointer"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+1 очко/тап</div>
                <div class="shop-item-desc">-50 энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 150
              </div>
            </div>
            
            <div class="shop-item" onclick="buyUpgrade(5, 750, 100)">
              <div class="shop-item-icon"><i class="fas fa-hand-pointer"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+5 очков/тап</div>
                <div class="shop-item-desc">-100 энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 750
              </div>
            </div>
            
            <div class="shop-item" onclick="buyUpgrade(10, 1500, 200)">
              <div class="shop-item-icon"><i class="fas fa-hand-pointer"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+10 очков/тап</div>
                <div class="shop-item-desc">-200 энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 1500
              </div>
            </div>
            
            <div class="shop-item" onclick="buyUpgrade(50, 7500, 400)">
              <div class="shop-item-icon"><i class="fas fa-hand-pointer"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+50 очков/тап</div>
                <div class="shop-item-desc">-400 энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 7500
              </div>
            </div>
            
            <div class="shop-item" onclick="buyUpgrade(100, 15000, 800)">
              <div class="shop-item-icon"><i class="fas fa-hand-pointer"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+100 очков/тап</div>
                <div class="shop-item-desc">-800 энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 15000
              </div>
            </div>
            
            <div class="shop-item" onclick="buyEnergy(100, 200)">
              <div class="shop-item-icon energy-icon-small"><i class="fas fa-bolt"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+100 энергии</div>
                <div class="shop-item-desc">Восстановление энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 200
              </div>
            </div>
            
            <div class="shop-item" onclick="buyEnergy(250, 450)">
              <div class="shop-item-icon energy-icon-small"><i class="fas fa-bolt"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+250 энергии</div>
                <div class="shop-item-desc">Восстановление энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 450
              </div>
            </div>
            
            <div class="shop-item" onclick="buyEnergy(500, 800)">
              <div class="shop-item-icon energy-icon-small"><i class="fas fa-bolt"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">+500 энергии</div>
                <div class="shop-item-desc">Восстановление энергии</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 800
              </div>
            </div>
          </div>
          
          <div class="tab-content" id="boosters-tab">
            <div class="shop-item" onclick="buyBooster('double', 3600, 2000)">
              <div class="shop-item-icon booster-icon"><i class="fas fa-times"></i> <i class="fas fa-2"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Двойной доход</div>
                <div class="shop-item-desc">Доход x2 на 1 час</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 2000
              </div>
            </div>
            
            <div class="shop-item" onclick="buyBooster('energy', 1800, 1500)">
              <div class="shop-item-icon booster-icon"><i class="fas fa-infinity"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Безлимитная энергия</div>
                <div class="shop-item-desc">Неограниченная энергия на 30 минут</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 1500
              </div>
            </div>
            
            <div class="shop-item" onclick="buyBooster('auto', 1800, 3000)">
              <div class="shop-item-icon booster-icon"><i class="fas fa-robot"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Автокликер</div>
                <div class="shop-item-desc">5 кликов/сек на 30 минут</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 3000
              </div>
            </div>
            
            <div class="shop-item premium-item" onclick="buyPremium(7500)">
              <div class="shop-item-icon premium-icon"><i class="fas fa-crown"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Премиум доступ</div>
                <div class="shop-item-desc">Все бустеры, VIP статус, +50% монет</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 7500
              </div>
            </div>
          </div>
          
          <div class="tab-content" id="special-tab">
            <div class="shop-item special-item" onclick="buySpecialItem('auto_energy', 5000)">
              <div class="shop-item-icon special-icon"><i class="fas fa-battery-full"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Автоматический восстановитель</div>
                <div class="shop-item-desc">Автоматически восстанавливает энергию, когда она заканчивается</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 5000
              </div>
            </div>
            
            <div class="shop-item special-item" onclick="buySpecialItem('gold_kraken', 25000)">
              <div class="shop-item-icon special-icon"><i class="fas fa-dragon"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Золотой Кракен</div>
                <div class="shop-item-desc">Эксклюзивный скин для Кракена, +25% к доходу</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 25000
              </div>
            </div>
            
            <div class="shop-item special-item" onclick="buySpecialItem('quantum_tap', 100000)">
              <div class="shop-item-icon special-icon"><i class="fas fa-atom"></i></div>
              <div class="shop-item-info">
                <div class="shop-item-title">Квантовый тап</div>
                <div class="shop-item-desc">1% шанс увеличить доход в 1000 раз при каждом клике</div>
              </div>
              <div class="shop-item-price">
                <i class="fas fa-coins"></i> 100000
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Модальное окно головоломки -->
    <div id="puzzle-modal" class="modal">
      <div class="modal-content puzzle-content">
        <div class="modal-header">
          <h2>Головоломка</h2>
          <button class="close-button" onclick="closePuzzle()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-body">
          <div class="puzzle-info">
            <div class="difficulty-selector">
              <button class="difficulty-btn active">Easy</button>
              <button class="difficulty-btn">Medium</button>
              <button class="difficulty-btn">Hard</button>
            </div>
            
            <div class="puzzle-reward">
              <i class="fas fa-coins"></i>
              <span id="puzzle-reward">50</span>
            </div>
            
            <div class="puzzle-timer">
              <i class="fas fa-hourglass-half"></i>
              <span id="timer">60</span>
            </div>
          </div>
          
          <div class="puzzle-progress-container">
            <div id="puzzle-progress" class="puzzle-progress"></div>
          </div>
          
          <div id="puzzle-container" class="puzzle-container">
            <!-- Ячейки головоломки будут созданы динамически -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- Друзья -->
    <div id="friends-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Друзья</h2>
          <button class="close-button" onclick="closeFriends()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-tabs">
          <div class="tab active" data-tab="friends-list">Список</div>
          <div class="tab" data-tab="invites">Приглашения</div>
        </div>
        
        <div class="modal-body">
          <div class="tab-content active" id="friends-list-tab">
            <div class="friends-list" id="friends-list">
              <!-- Список друзей будет заполнен динамически -->
            </div>
          </div>
          
          <div class="tab-content" id="invites-tab">
            <div class="invite-link">
              <p>Пригласи друзей в игру и получи 50000 монет за каждого!</p>
              <div class="invite-qr">
                <img src="TAPKRAKEN.png" alt="QR-код приглашения">
              </div>
              <button class="copy-link-btn" onclick="copyInviteLink()">
                <i class="fas fa-copy"></i> Копировать ссылку
              </button>
              <button class="share-btn" onclick="shareInvite()">
                <i class="fas fa-share-alt"></i> Поделиться
              </button>
              <p class="invite-note">При переходе по ссылке друг получит бонус в 1000 монет!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Задания -->
    <div id="tasks-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Задания</h2>
          <button class="close-button" onclick="closeTasks()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-tabs">
          <div class="tab active" data-tab="daily-tasks">Ежедневные</div>
          <div class="tab" data-tab="achievements">Достижения</div>
        </div>
        
        <div class="modal-body">
          <div class="tab-content active" id="daily-tasks-tab">
            <div class="tasks-list" id="daily-tasks-list">
              <!-- Список заданий будет заполнен динамически -->
            </div>
          </div>
          
          <div class="tab-content" id="achievements-tab">
            <div class="achievements-list" id="achievements-list">
              <!-- Список достижений будет заполнен динамически -->
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Лидерборд -->
    <div id="leaderboard-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Таблица лидеров</h2>
          <button class="close-button" onclick="closeLeaderboard()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-tabs">
          <div class="tab active" data-tab="global">Глобальный</div>
          <div class="tab" data-tab="friends-board">Друзья</div>
        </div>
        
        <div class="modal-body">
          <div class="tab-content active" id="global-tab">
            <div class="leaderboard-list" id="global-leaderboard">
              <!-- Глобальный лидерборд будет заполнен динамически -->
            </div>
          </div>
          
          <div class="tab-content" id="friends-board-tab">
            <div class="leaderboard-list" id="friends-leaderboard">
              <!-- Лидерборд друзей будет заполнен динамически -->
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Lucky Drive -->
    <div id="lucky-drive-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Lucky Drive</h2>
          <button class="close-button" onclick="closeLuckyDrive()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-body">
          <div class="lucky-drive-container">
            <div class="wheel-container">
              <div class="wheel" id="lucky-wheel">
                <!-- Сектора колеса будут созданы динамически -->
              </div>
              <div class="wheel-pointer"></div>
            </div>
            
            <div class="lucky-drive-info">
              <div class="spin-price">
                <i class="fas fa-coins"></i> <span id="spin-price">200</span>
              </div>
              
              <button class="spin-button" onclick="spinWheel()">
                <i class="fas fa-play"></i> Крутить колесо
              </button>
              
              <div class="prize-history">
                <h3>История призов</h3>
                <div id="prize-history-list" class="prize-history-list">
                  <!-- История призов будет заполнена динамически -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Telegram команды -->
    <div id="telegram-commands-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Telegram команды</h2>
          <button class="close-button" onclick="closeTelegramCommands()"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="modal-body">
          <div class="telegram-info">
            <p>Получай бонусы и управляй игрой через Telegram бота!</p>
            <div class="telegram-qr">
              <img src="TAPKRAKEN.png" alt="QR-код для Telegram">
            </div>
            <div class="telegram-link">@TapKrakenBot</div>
          </div>
          
          <div class="commands-list">
            <div class="command-item">
              <div class="command-name">/start</div>
              <div class="command-desc">Начать игру и получить ссылку</div>
            </div>
            
            <div class="command-item">
              <div class="command-name">/daily</div>
              <div class="command-desc">Получить ежедневную награду</div>
            </div>
            
            <div class="command-item">
              <div class="command-name">/invite</div>
              <div class="command-desc">Пригласить друзей и получить 50000 монет</div>
            </div>
            
            <div class="command-item">
              <div class="command-name">/boost</div>
              <div class="command-desc">Получить временный бонус (только 1 раз!)</div>
            </div>
            
            <div class="command-item">
              <div class="command-name">/gift [username]</div>
              <div class="command-desc">Отправить подарок другому игроку</div>
            </div>
            
            <div class="command-item">
              <div class="command-name">/stats</div>
              <div class="command-desc">Получить текущую статистику</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Подключение JavaScript -->
  <script src="script.js"></script>
  <script src="puzzle.js"></script>
  <script src="tg_bot_functions.js"></script>
  <script src="city_functions.js"></script>
  <script src="minigames.js"></script>
  
  <script>
    // Инициализация при загрузке
    document.addEventListener('DOMContentLoaded', function() {
      // Инициализируем город
      if (window.city) {
        window.city.openCityTab();
      }
      
      // Обработчик для кнопок навигации
      document.querySelectorAll('.nav-button').forEach(button => {
        button.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          if (tabName === 'city' && window.city) {
            window.city.openCityTab();
          } else if (tabName === 'home') {
            switchTab('home');
          }
        });
      });
    });
  </script>
</body>
</html>